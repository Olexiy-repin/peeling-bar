$(document).ready(function(){function t(){var t={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(i,e,n){t[e]=n});return t}function i(t){for(var i=t+"=",e=document.cookie.split(";"),n=0;n<e.length;n++){for(var a=e[n];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(i))return a.substring(i.length,a.length)}return null}$('input[name="utm_source"]').val(t().utm_source),$('input[name="utm_campaign"]').val(t().utm_campaign),$('input[name="utm_medium"]').val(t().utm_medium),$('input[name="utm_term"]').val(t().utm_term),$('input[name="utm_content"]').val(t().utm_content),$('input[name="click_id"]').val(t().aff_sub),$('input[name="affiliate_id"]').val(t().aff_id),$('input[name="user_agent"]').val(navigator.userAgent),$('input[name="ref"]').val(document.referrer),$.get("https://ipinfo.io",function(t){$('input[name="ip_address"]').val(t.ip),$('input[name="city"]').val(t.city),$('input[name="country"]').val(t.country),$('input[name="region"]').val(t.region)},"jsonp"),setTimeout(function(){$(".gclid_field").val(i("gclid")),""==$(".gclid_field").val()&&$(".gclid_field").val(i("_gid"))},2e3);var e,n='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 286.1 286.1"><path d="M143 0C64 0 0 64 0 143c0 79 64 143 143 143 79 0 143-64 143-143C286.1 64 222 0 143 0zM143 259.2c-64.2 0-116.2-52-116.2-116.2S78.8 26.8 143 26.8s116.2 52 116.2 116.2S207.2 259.2 143 259.2zM143 62.7c-10.2 0-18 5.3-18 14v79.2c0 8.6 7.8 14 18 14 10 0 18-5.6 18-14V76.7C161 68.3 153 62.7 143 62.7zM143 187.7c-9.8 0-17.9 8-17.9 17.9 0 9.8 8 17.8 17.9 17.8s17.8-8 17.8-17.8C160.9 195.7 152.9 187.7 143 187.7z" fill="#E2574C"/></svg>';$(".submit").click(function(t){t.preventDefault();var i=$(this).closest("form").find("[required]");$(i).each(function(){if(""!=$(this).val())e=0,$(this).addClass("error").parent(".field").find(".allert").remove();else{$(this);if("email"==$(this).attr("type")){/^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i.test($(this).val())||($("input[name=email]").val(""),$(this).addClass("error").parent(".field").append('<div class="allert"><p>Укажите коректный e-mail</p>'+n+"</div>"),e=1,$(":input.error:first").focus())}else if("tel"==$(this).attr("type")){/^()[- +()0-9]{9,18}/i.test($(this).val())||($("input[name=phone]").val(""),$(this).addClass("error").parent(".field").append('<div class="allert"><p>Укажите номер телефона в формате +3809999999</p>'+n+"</div>"),e=1,$(":input.error:first").focus())}else $(this).addClass("error").parent(".field").append('<div class="allert"><p>Заполните это поле</p>'+n+"</div>"),e=1,$(":input.error:first").focus()}}),1!==e&&$(this).unbind("submit").submit()}),$("form").on("submit",function(t){t.preventDefault(),$(".submit").addClass("inactive"),$(".submit").prop("disabled",!0);var i=$(this);i.find("input");$.ajax({type:"POST",url:"db/registration.php",dataType:"json",data:i.serialize(),success:function(t){}}),setTimeout(function(){window.location.href="success.html"},800)})});